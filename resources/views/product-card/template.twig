{% set product = TimberPost(product) %}

<a href="{{product.permalink}}" class="product-card">

  {% set product_image = product.get_field('product_images')[0].sizes.square %}

  <div class="product-card__media">
    {% if 'product_categories-hero-winner' in product.class %}
      <div class="product-card__rosette">Hero Awards Winner</div>
    {% endif %}
    <div class="media-wrap media-wrap--square">
      <img class="product-card__image media-wrap__item" data-src="{{product_image|resize(340,340)}}" alt="{{product.post_title}} Product Image">
      <noscript>
        <img class="product-card__image media-wrap__item" src="{{product_image|resize(340,340)}}" alt="{{product.post_title}} Product Image">
      </noscript>
    </div>
  </div>

  <div class="product-card__content">
    {% if 'product_categories-category-winner' in product.class %}
      <div class="product-card__badge">Winner</div>
    {% endif %}
    {% if product.product_rating %}
      <div class="product-card__rating">
        {% include "@AgreableProductPlugin/star-rating/template.twig" with { modifier: 'small' } %}
      </div>
    {% endif %}
    <h3 class="product-card__title">
      {{product.post_title}}
    </h3>
    <p class="product-card__brand">
      {{product.brand_name}}
    </p>
    {% if product.product_price %}
      <p class="product-card__price">
        {{product.product_price}}
      </p>
    {% endif %}
    <p class="product-card__link">View product</p>
  </div>
</a>
